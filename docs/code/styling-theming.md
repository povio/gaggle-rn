# Styling, theming and design system

We use [Restyle](https://shopify.github.io/restyle/) for styling. It is used because it is compatible with Povio's design system, it's easy to use, and performant.

## Design system

The template is using Povio internal design system (also known as Atlas) as the basis. The system is drawn in Figma and specifies design atoms (colors, spacings, typography) and components (buttons, dropdowns, ...). The idea behind this system is that it can be used to start a new project quickly by copying the base Figma file and readjusting the colors, typographies, etc. At the same time, this project implements that Figma, so that the same changes as they are done in Figma can also be applied here in code to achieve the same result. Finally, the Figma and the code follow the same terminology, making it easier to implement designs.

Here's the Figma of the base system, which is also implemented in this project: [Figma Atlas](https://www.figma.com/file/FNArLiOpL1dUs0YOF2ON4f/Mobile-Project---Design-System---WIP2).

Please note that the design system is not mandatory to use - it will be used on all new projects that start at Povio, but many times you might still receive designs from third party designers. Instructions below will detail when to use it and when not to use the system, and what to do if you aren't using it.

### Design atoms and theme auto-generation

Design tokens from the system are specified in the Restyle theme `restyleTheme.ts`. They are actually imported using a script using this procedure:

1. Inside `theme/baseRestyleTheme.ts` write all the configuration that is not in Figma. Sensible defaults are provided.
2. In Figma, use the [AVE](https://www.figma.com/community/plugin/1260472771849439434) plugin. Select all styles to be exported (text and color), format to CSS and colors to HEXa and format to PX. After exporting, you should receive a zip file, containing one file: `index.css`. Place that in `theme/themegen/index.css`.
3. Run `yarn themegen`. This will populate colors, borderRadii and spacing values from the Figma export. Other values (like button variants...) need to be adjusted manually.
4. You should now have a `restyleTheme.ts` file with all the theme values. We recommend not gitignoring `theme/index.css` so you can keep track of changes.
5. If you need to add any one-off style into the theme, add it to `theme/baseRestyleTheme.ts` and rerun `yarn themegen`. Avoid changing the generated file directly. Also enter breakpoints into this file (or keep the default ones).
6. If you spot any bugs with themegen, please report them to the template maintainers.

Note that the idea is that you could run themegen again at some point in the future, and it should not remove anything that you added manually. It should only add new things that are in Figma but not in the theme. In order to accomplish this, you should not modify the generated file directly, but rather add things to `baseRestyleTheme.ts` and rerun themegen. You can opt-out of this process by generating the theme only once - in this case we suggest you remove the `theme` folder from the project, as well as the `utils/theme/themegen` folder.

If you are not using Povio's design system, you can delete `theme` folder, `utils/theme/themegen` folder, and adapt the theme to match your project. Use the autogenerated theme as your guide.

### Design components

The components are stored in the `components` folder. They are themed in exact accordance with the design system, using the same names (like variants, button widths, typography sizes, ...). This way, you can easily follow the process of building UIs by checking out the properties of the component in Figma, and then writing this same component in code. Here's an example:

[Design system example in Figma](./img/design_system_example_figma.png)

And the corresponding code (note how the names are the same):

```tsx
<Button variant="primary" size="large" width="l">
  Log in
</Button>
```

If you don't plan on using our components, just change the components inside these files. Try to avoid importing your UI library outside of this folder to keep the code abstract. This also means that it should be very easy to remove any kind of a reference to Povio's system from the project by just removing the contents inside the components folder.

### Alternatives

The design system can only be used if the design team is using it. This depends on external factors. If the design system is not being used on the design side, it might be difficult to translate Figma designs into the code using the existing system unless the provided Figma designs are conceptually designed in a similar manner.

In most such cases, you will need to implement your own design system. In this case, you can start from a blank `restyleTheme.ts`. Regarding the UI components, you could keep their functionality and restyle them acording to your own needs.

## Storybook

This project includes a Storybook setup. Run `yarn storybook:ios` or `yarn storybook:android` to inspect it. The story files are collocated with components, as you can see in `src/components`.

## Guidelines

Here are some guidelines for theming and styling:

- Avoid hardcoding values inside classes and instead, define and use them in the theme.
- Name colors and fonts semantically. For example, if the primary color is blue, don't name it `blue`, but `primary`. This way, if the color changes, you don't have to change the class names. Make sure that the designers follow this practice as well so that Figma and code are in sync.

## Template instructions

- Decide whether or not you are using Povio's design system. If you aren't, adapt the look & feel of the components in the `src/components` folder to your needs, and rewrite the section above to include the information about the design system. If you are using Povio's system, you can use the components as they are, but make sure to also apply the theme. Modify the readme above accordingly.
- If you aren't using Povio's design system, change the default colors and typographies in `restyleTheme.ts`, and remove everything that you don't need (in most cases, that should be everything).
- While you can switch to using some other styling solution, we strongly suggest you stick with Restyle due to the amount of tooling and processes built around it at Povio, it's popularity and superior performance. If you still think another solution would be better for your particular project, please consult with your architect.
